# Promo Load Analyzer

**CLI tool for load testing PrestaShop promotions before Black Friday**

## Description

Promo Load Analyzer is a Python CLI tool that automatically detects promotional pages on PrestaShop websites, scrapes promotion data, generates K6 load tests, executes them, and provides performance analysis with actionable recommendations.

## Features

- ğŸ” Automatic page detection (Category/Product/Catalog)
- ğŸ›’ Promo scraping (3 types: -15% OFF, 2nd Half Price, Free Shipping >79â‚¬)
- ğŸ“Š K6 load test generation with safety thresholds
- ğŸš€ Load test execution and results analysis
- âš¡ Performance scoring (A-F grades)
- ğŸ›¡ï¸ PROD safety mechanisms (time windows, VU limits)

## Quick Start

### Prerequisites

- Python 3.11+
- K6 v0.47+
- macOS or Linux

### Installation

```bash
# Clone repository
git clone <repository-url>
cd "Projet K6"

# Run setup script
./scripts/setup_dev.sh

# Activate virtual environment
source venv/bin/activate

# Verify installation
python src/main.py --help
```

## Usage

```bash
# Basic usage
python src/main.py --url https://preprod.site.com/category-page

# PROD mode (with safety constraints)
python src/main.py --url https://prod.site.com/category --environment PROD

# With PrestaShop API enrichment
python src/main.py --url https://site.com/product --api-key YOUR_KEY
```

## Project Structure

```
Projet K6/
â”œâ”€â”€ src/                 # Source code
â”‚   â”œâ”€â”€ main.py         # CLI orchestrator
â”‚   â”œâ”€â”€ models/         # Pydantic data models
â”‚   â””â”€â”€ utils/          # Utilities
â”œâ”€â”€ tests/              # Test suite
â”œâ”€â”€ scripts/            # Setup and utility scripts
â”œâ”€â”€ templates/          # K6 script templates
â”œâ”€â”€ docs/               # Documentation
â””â”€â”€ logs/               # Application logs
```

## Documentation

- [Product Requirements](./docs/prd.md)
- [Architecture](./docs/architecture.md)
- [Epics](./docs/epics/)

## Tech Stack

- **Python 3.11+** - Modern Python features
- **Playwright 1.40+** - Browser automation
- **K6 0.47+** - Load testing
- **Pydantic 2.5+** - Data validation
- **Loguru 0.7+** - Logging

## Development

### Run Tests

```bash
pytest tests/
```

### Linting

```bash
ruff check src/
mypy src/
```

### Format Code

```bash
ruff format src/
```

## Safety Constraints

**PROD mode enforces strict limits:**
- â° Time window: 3h-6h AM only
- ğŸ‘¥ Max VUs: 50 concurrent users
- ğŸ“– Read-only operations
- ğŸ”’ Threshold-based circuit breakers

## License

Proprietary - Internal use only

## Support

For issues or questions, contact the development team.

---

*Generated by BMad Method - 2025-10-26*
