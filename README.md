# Promo Load Analyzer

**CLI tool for load testing PrestaShop promotions before Black Friday**

## Description

Promo Load Analyzer is a Python CLI tool that automatically detects promotional pages on PrestaShop websites, scrapes promotion data, generates K6 load tests, executes them, and provides performance analysis with actionable recommendations.

## Features

- 🔍 Automatic page detection (Category/Product/Catalog)
- 🛒 Promo scraping (3 types: -15% OFF, 2nd Half Price, Free Shipping >79€)
- 📊 K6 load test generation with safety thresholds
- 🚀 Load test execution and results analysis
- ⚡ Performance scoring (A-F grades)
- 🛡️ PROD safety mechanisms (time windows, VU limits)

## Quick Start

### Prerequisites

- Python 3.11+
- K6 v0.47+
- macOS or Linux

### Installation

```bash
# Clone repository
git clone <repository-url>
cd "Projet K6"

# Run setup script
./scripts/setup_dev.sh

# Activate virtual environment
source venv/bin/activate

# Verify installation
python src/main.py --help
```

## Usage

```bash
# Basic usage
python src/main.py --url https://preprod.site.com/category-page

# PROD mode (with safety constraints)
python src/main.py --url https://prod.site.com/category --environment PROD

# With PrestaShop API enrichment
python src/main.py --url https://site.com/product --api-key YOUR_KEY
```

## Project Structure

```
Projet K6/
├── src/                 # Source code
│   ├── main.py         # CLI orchestrator
│   ├── models/         # Pydantic data models
│   └── utils/          # Utilities
├── tests/              # Test suite
├── scripts/            # Setup and utility scripts
├── templates/          # K6 script templates
├── docs/               # Documentation
└── logs/               # Application logs
```

## Documentation

- [Product Requirements](./docs/prd.md)
- [Architecture](./docs/architecture.md)
- [Epics](./docs/epics/)

## Tech Stack

- **Python 3.11+** - Modern Python features
- **Playwright 1.40+** - Browser automation
- **K6 0.47+** - Load testing
- **Pydantic 2.5+** - Data validation
- **Loguru 0.7+** - Logging

## Development

### Run Tests

```bash
pytest tests/
```

### Linting

```bash
ruff check src/
mypy src/
```

### Format Code

```bash
ruff format src/
```

## Safety Constraints

**PROD mode enforces strict limits:**
- ⏰ Time window: 3h-6h AM only
- 👥 Max VUs: 50 concurrent users
- 📖 Read-only operations
- 🔒 Threshold-based circuit breakers

## License

Proprietary - Internal use only

## Support

For issues or questions, contact the development team.

---

*Generated by BMad Method - 2025-10-26*
